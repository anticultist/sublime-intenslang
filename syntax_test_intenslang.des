// SYNTAX TEST "intenslang.sublime-syntax"

// foo
// <- source.intens comment.line.double-slash.intens

DESCRIPTION "Test Syntax";
// <- keyword.control.intens
//                       ^ punctuation.terminator.statement.intens

INCLUDE external_file.inc
// <- keyword.control.import.intens

USERGROUPS
// <- storage.type.other.intens
  some_user (
    "me", "you"
//      ^ punctuation.separator.delimiter.intens
  )
  , admin (
//^ punctuation.separator.delimiter.intens
    "someone"
  );
// ^ punctuation.terminator.statement.intens

DATAPOOL
INTEGER one, two;
//  <- storage.type.intens
//      ^^^ punctuation.definition.variable.intens
//         ^ punctuation.separator.delimiter.intens
//           ^^^ punctuation.definition.variable.intens
//              ^ punctuation.terminator.statement.intens

COLOR mycolor1 ();
//  <- storage.type.intens
//    ^^^^^^^^ punctuation.definition.variable.intens
//             ^ punctuation.section.group.begin.intens
//              ^ punctuation.section.group.end.intens
//               ^ punctuation.terminator.statement.intens


COLOR mycolor2 (
//  <- storage.type.intens
//    ^^^^^^^^ punctuation.definition.variable.intens
//             ^ punctuation.section.group.begin.intens
        INVALID = (red, black),
//                    ^ punctuation.separator.delimiter.intens
//      ^^^^^^^ variable.parameter.intens
//              ^ keyword.operator.assignment.augmented.intens
//                            ^ punctuation.separator.delimiter.intens
        < 0 = ("#fff", "#f00"),
//              ^^^^ constant.other.color.rgb-value.hex.intens
//                            ^ punctuation.separator.delimiter.intens
        RANGE(0, <2.1) = ("#ffffff", "#00ff00"),
//      ^^^^^ support.function.builtin.intens
//            ^ constant.numeric.intens
//                ^^^ constant.numeric.intens
//                                             ^ punctuation.separator.delimiter.intens
        2 = ("#ffffff", "#0000ff"),
//        ^ keyword.operator.assignment.intens
//            ^^^^^^^ constant.other.color.rgb-value.hex.intens
//                                ^ punctuation.separator.delimiter.intens
        "mytext" = ( "#e0e0e0", "#e0e0e0" ),
//               ^ keyword.operator.assignment.intens
//                                         ^ punctuation.separator.delimiter.intens
        ELSE = ("#ffffff", "#0000ff")
//      ^^^^ variable.parameter.intens
//           ^ keyword.operator.assignment.augmented.intens
    );
//  ^ punctuation.section.group.end.intens
//   ^ punctuation.terminator.statement.intens

INTEGER baz {TOGGLE};
//  <- storage.type.intens
//      ^^^ punctuation.definition.variable.intens

REAL WHILE;
//  <- storage.type.intens
//   ^^^^^ invalid.illegal.name.intens

INTEGER {EDITABLE}
//  <- storage.type.intens
//       ^^^^^^^^ storage.modifier.intens
    foo {LABEL="mylabel", TOGGLE, FUNC=myfunc},
//  ^^^ punctuation.definition.variable.intens
//       ^^^^^ variable.parameter.intens - support.function.builtin.intens
//            ^ keyword.operator.assignment.augmented.intens
//                      ^ punctuation.separator.delimiter.intens
//                              ^ punctuation.separator.delimiter.intens
//                                     ^^^^^^ variable.function.intens
//                                            ^ punctuation.separator.delimiter.intens
    bar {COLOR=mycolor2};
//  ^^^ punctuation.definition.variable.intens
//                      ^ punctuation.terminator.statement.intens

SET myset ("zero"=0, "one"=1);
// <- storage.type.enum.intens
//  ^^^^^ entity.name.enum.intens
//        ^ punctuation.section.group.begin.intens
//                          ^ punctuation.section.group.end.intens
//                           ^ punctuation.terminator.statement.intens

SET myset2 {INVALID=NONE} ("X"=0, "Y"=1);
//         ^ punctuation.section.group.begin.intens
//                 ^ keyword.operator.assignment.augmented.intens
//                  ^^^^ constant.language.intens
//                      ^ punctuation.section.group.end.intens

SET myset3 ("A"=1, "B"=2), myset4 ("C"=3, "D"=4);
//                       ^ punctuation.separator.delimiter.intens
//                         ^^^^^^ entity.name.enum.intens

SET STRING ();
// <- storage.type.enum.intens
//  ^^^^^^ invalid.illegal.name.intens
//         ^ punctuation.section.group.begin.intens
//          ^ punctuation.section.group.end.intens
//           ^ punctuation.terminator.statement.intens

STRUCT MYSTRUCT {
// <- storage.type.struct.intens
//     ^^^^^^^^ entity.name.struct.intens
//              ^ punctuation.section.block.begin.intens
    INTEGER one, two;
//  ^^^^^^^ storage.type.intens
//          ^^^ punctuation.definition.variable.intens
//             ^ punctuation.separator.delimiter.intens
//               ^^^ punctuation.definition.variable.intens
//                  ^ punctuation.terminator.statement.intens
    REAL three;};
//  ^^^^ storage.type.intens
//       ^^^^^ punctuation.definition.variable.intens
//            ^ punctuation.terminator.statement.intens
//             ^ punctuation.section.block.end.intens
//              ^ punctuation.terminator.statement.intens

STRUCT MYSTRUCT_EXT : MYSTRUCT {
//                  ^ punctuation.separator.intens
//                    ^^^^^^^^ entity.other.inherited-class.intens
//                             ^ punctuation.section.block.begin.intens
    INTEGER four;
};
// <- punctuation.section.block.end.intens

STRUCT MYSTRUCT_EXT2 : WHILE {};
//                     ^^^^^ invalid.illegal.name.intens

STRUCT MYSTRUCT2 {
    INTEGER{ EDITABLE }
//  ^^^^^^^ storage.type.intens
        button1 {LABEL="mylabel", BUTTON, FUNC=myfunc},
        foo {SET=myset, UNIT="Hz"};
//               ^^^^^ storage.type.enum.intens

    MYSTRUCT bar;
    STRING baz;
};

MYSTRUCT2 { OMIT_TTRAIL } foo;

STRUCT REAL {};
// <- storage.type.struct.intens
//     ^^^^ invalid.illegal.name.intens
//          ^ punctuation.section.block.begin.intens
//           ^ punctuation.section.block.end.intens
//            ^ punctuation.terminator.statement.intens

STRUCT MYSTRUCT3 { INTEGER REAL;};
//               ^ punctuation.section.block.begin.intens
//                 ^^^^^^^ storage.type.intens
//                         ^^^^ invalid.illegal.name.intens
//                             ^ punctuation.terminator.statement.intens
//                              ^ punctuation.section.block.end.intens
//                               ^ punctuation.terminator.statement.intens

END DATAPOOL;
//          ^ punctuation.terminator.statement.intens

FUNCTIONS

FUNC myfunc, myfunc2;
// <- storage.type.function.intens
//   ^^^^^^ entity.name.function.intens
//         ^ punctuation.separator.delimiter.intens
//           ^^^^^^^ entity.name.function.intens
//                  ^ punctuation.terminator.statement.intens

FUNC
// <- storage.type.function.intens
    myfunc
//  ^^^^^^ entity.name.function.intens
  , myfunc2
//^ punctuation.separator.delimiter.intens
//  ^^^^^^^ entity.name.function.intens
  ;
//^ punctuation.terminator.statement.intens

END FUNCTIONS;
//           ^ punctuation.terminator.statement.intens

STREAMER

simple_stream (!foo, foo);
//             ^ keyword.operator.logical.intens
//                       ^ punctuation.terminator.statement.intens

my_stream { XML {SCHEMA="myschema.xsd", VERSION="1.0"} }
//          ^^^ constant.language.intens
//                     ^ keyword.operator.assignment.augmented.intens
  (foo, bar, EOLN);

datapool_stream {XML} (DATAPOOL);

my_stream2 {PROCESS="thefile.txt"} (
  foo
);

my_stream3 (!foo[#A].bar.one);
//               ^^ keyword.other.intens

END STREAMER;
//          ^ punctuation.terminator.statement.intens

OPERATOR

SOCKET my_socket {
//               ^ punctuation.section.group.begin.intens
      PORT=666,
//    ^^^^ variable.parameter.intens
//        ^ keyword.operator.assignment.augmented.intens
//         ^^^ constant.numeric.intens
//            ^ punctuation.separator.delimiter.intens
      STREAM=my_stream,
      FUNC=myfunc},
//         ^^^^^^ variable.function.intens
//               ^ punctuation.section.group.end.intens
//                ^ punctuation.separator.delimiter.intens
  my_socket2 {
//           ^ punctuation.section.group.begin.intens
      MFM,
      PORT=333,
      STREAM=my_stream2,
      FUNC=myfunc2,
//         ^^^^^^^ variable.function.intens
      ON_EOS=myfunc2,
//           ^^^^^^^ variable.function.intens
      ON_VIEW_ACTION=myfunc2,
//                   ^^^^^^^ variable.function.intens
      struct[*].data,
      THUMBNAIL(struct[*].thumbnail, 200, 200)},
//    ^^^^^^^^^ support.function.builtin.intens
//              ^^^^^^ variable.other.intens
//                                            ^ punctuation.section.group.end.intens
//                                             ^ punctuation.separator.delimiter.intens
  my_socket3 {
    PORT=666,
    (
      HEADER="MYHEADER",
//                     ^ punctuation.separator.delimiter.intens
      REQUEST=my_stream,
      FUNC=myfunc,
//    ^^^^ variable.parameter.intens
//        ^ keyword.operator.assignment.augmented.intens
//         ^^^^^^ variable.function.intens
      RESPONSE=simple_stream
    )
  };

PROCESS myprocess_pr : BATCH { "myprocess.pl" };
//                   ^ punctuation.separator.intens
//                                             ^ punctuation.terminator.statement.intens

PROCESSGROUP
// <- storage.type.other.intens
  myprocessgroup_pg { "My name",
                      FORM=NONE,
                      HIDDEN,
                      NO_LOG}
      (
        [(foo.bar[#]:-100, EOLN, foo.bar2)]
//                ^ keyword.other.intens
//                       ^ punctuation.separator.delimiter.intens
        = myprocess_pr
//      ^ keyword.operator.assignment.augmented.intens
          (foo.bar, EOLN, foo.bar2);
      ),
     myprocessgroup2_pg {"My name2", FORM=NONE, HIDDEN} ();
//                                              ^^^^^^ variable.parameter.intens

TIMER my_timer {FUNC=myfunc};
// <- storage.type.other.intens
//                   ^^^^^^ variable.function.intens

FILESTREAM myfilestream_fs = my_stream {"My Stream",
// <- storage.type.other.intens
//                         ^ keyword.operator.assignment.augmented.intens
//                                     ^ punctuation.section.group.begin.intens
                                        FILTER="CSV (*.csv)",
//                                                          ^ punctuation.separator.delimiter.intens
                                        WRITEONLY};
//                                               ^ punctuation.section.group.end.intens
//                                                ^ punctuation.terminator.statement.intens

TASK mytask {"Optimize"} {
  one = 1;
  WHILE( one<3 ) {
//^^^^^ meta.block.intens keyword.control.intens
    RUN myfunc;
//  ^^^ support.function.builtin.intens
//      ^^^^^^ variable.function.intens
  }
};

MESSAGE_QUEUE
  reply_mq {
    REPLY,
    PORT_REQUEST=334,
    ( HEADER="myheader1",
      FUNC=myfunc,
      RESPONSE(simple_stream, my_stream),
//    ^^^^^^^^ support.function.builtin.intens
      REQUEST(datapool_stream)
//    ^^^^^^^ support.function.builtin.intens
    ),
    ( HEADER="myheader2",
      FUNC=myfunc,
      RESPONSE(simple_stream, my_stream),
      REQUEST(datapool_stream)
    )
  };

END OPERATOR;
//          ^ punctuation.terminator.statement.intens

FUNCTIONS

FUNC myfunc {
// <- storage.type.function.intens
//   ^^^^^^ entity.name.function.intens
//          ^ punctuation.section.block.begin.intens
    INTEGER foo, bar;
//  ^^^^^^^ storage.type.intens
//          ^^^ punctuation.definition.variable.intens
//             ^ punctuation.separator.delimiter.intens
//               ^^^ punctuation.definition.variable.intens
//                  ^ punctuation.terminator.statement.intens

    RUN( myfunc2 );
//     ^ punctuation.section.group.begin.intens
//       ^^^^^^^ variable.function.intens
//               ^ punctuation.section.group.end.intens
//                ^ punctuation.terminator.statement.intens

    RUN(foo.baz);

    SEND(HOST="localhost",
//       ^^^^ variable.parameter.intens
//           ^ keyword.operator.assignment.augmented.intens
//                       ^ punctuation.separator.delimiter.intens
         PORT=666,
//       ^^^^ variable.parameter.intens
//               ^ punctuation.separator.delimiter.intens
         STREAM=my_stream);
//       ^^^^^^ variable.parameter.intens

    folder = DIRNAME{DIRNAME=folder};
//         ^ keyword.operator.assignment.intens
//           ^^^^^^^ support.function.builtin.intens
//                   ^^^^^^^ variable.parameter.intens
//                          ^ keyword.operator.assignment.intens
    DIRNAME(myfilestream_fs);
//  ^^^^^^^ support.function.builtin.intens

    foo = 1e3 + 1e-3 + 60E9 -7.9e-05 + 1e+009;
//        ^^^ constant.numeric.intens
//              ^^^^ constant.numeric.intens
//                     ^^^^ constant.numeric.intens
//                           ^^^^^^^ constant.numeric.intens
//                                     ^^^^^^ constant.numeric.intens

    WHILE(foo < (1 + 4)) {
//  ^^^^^ keyword.control.intens
//       ^ punctuation.section.group.begin.intens
//                     ^ punctuation.section.group.end.intens
        RUN( myfunc3 );
//         ^ punctuation.section.group.begin.intens
//           ^^^^^^^ variable.function.intens
//                   ^ punctuation.section.group.end.intens
//                    ^ punctuation.terminator.statement.intens
        IF (foo != 3 && (VALID(foo))) {
//              ^^ keyword.operator.comparison.intens
//                   ^^ keyword.operator.arithmetic.intens
//                       ^^^^^ support.function.builtin.intens
            INPUT = OLDVALUE;
//          ^^^^^ variable.language.intens
            THIS.buzz = 2;
//          ^^^^ variable.language.intens
        }
        ELSE {
            bar = ABS(bar - ROUND(1 + 4.8));
//                ^^^ support.function.builtin.intens
//                          ^^^^^ support.function.builtin.intens
            bar += 1.;
//                 ^^ constant.numeric.intens
            RETURN;
//          ^^^^^^ keyword.control.intens
//                ^ punctuation.terminator.statement.intens
        }
        foo++;
//         ^^ keyword.operator.arithmetic.intens
    }

    REQUEST(REQUEST=my_stream2, RESPONSE(my_stream, my_stream2), FUNC=myfunc2);
//                            ^ punctuation.separator.delimiter.intens
//                                                             ^ punctuation.separator.delimiter.intens
//                                                               ^^^^ variable.parameter.intens
//                                                                   ^ keyword.operator.assignment.augmented.intens
//                                                                    ^^^^^^^ variable.function.intens

    IF (! RUN(myfunc3) ){
        ABORT;
//      ^^^^^ keyword.control.intens
//           ^ punctuation.terminator.statement.intens
    }

    IF ( REASON_OPEN ) {
//  ^^ keyword.control.intens
//     ^ punctuation.section.group.begin.intens
//       ^^^^^^^^^^^ constant.other.intens
//                   ^ punctuation.section.group.end.intens
//                     ^ punctuation.section.block.begin.intens
        ABORT("Abort message");
//      ^^^^^ support.function.builtin.intens
//                            ^ punctuation.terminator.statement.intens
    }
//  ^ punctuation.section.block.end.intens
    ELSE IF ( REASON_CLOSE ) {
//  ^^^^ keyword.control.intens
//            ^^^^^^^^^^^^ constant.other.intens
//                           ^ punctuation.section.block.begin.intens
    }
//  ^ punctuation.section.block.end.intens
    MESSAGEBOX(COMPOSE("Finished %1!", "function"));
//  ^^^^^^^^^^ support.function.builtin.intens
//            ^ punctuation.section.group.begin.intens
//             ^^^^^^^ support.function.builtin.intens
//                               ^^ constant.character.format.placeholder.other.intens
//                                   ^ punctuation.separator.delimiter.intens
//                                               ^ punctuation.section.group.end.intens
}
// <-  punctuation.section.block.end.intens
;
// <- punctuation.terminator.statement.intens

FUNC myfunc2 {},
// <- storage.type.function.intens
//   ^^^^^^^ entity.name.function.intens
//           ^ punctuation.section.block.begin.intens
//            ^ punctuation.section.block.end.intens
//             ^ punctuation.separator.delimiter.intens
    myfunc3
//  ^^^^^^^ entity.name.function.intens
    {};
//  ^ punctuation.section.block.begin.intens
//   ^ punctuation.section.block.end.intens
//    ^ punctuation.terminator.statement.intens

FUNC{DEADLY_SILENT, UPDATE_FORMS=NONE, PRIORITY=HIGH}
// <- storage.type.function.intens
//  ^ punctuation.section.group.begin.intens
//   ^^^^^^^^^^^^^ variable.parameter.intens
//                ^ punctuation.separator.delimiter.intens
//                  ^^^^^^^^^^^^ variable.parameter.intens
//                              ^ keyword.operator.assignment
//                               ^^^^ constant.language.intens
//                                     ^^^^^^^^ variable.parameter.intens
//                                                  ^ punctuation.section.group.end.intens
    myfunc4 {};
//  ^^^^^^^ entity.name.function.intens

END FUNCTIONS;
//           ^ punctuation.terminator.statement.intens

UI_MANAGER

FIELDGROUP
// <- storage.type.other.intens
  mygroup_fg { MARGIN(0) } (
//             ^^^^^^ support.function.builtin.intens
    foo.foo,
//         ^ punctuation.separator.delimiter.intens
    "<h3>Title</h3> <b>Bold</b>",
//   ^^^^ keyword.other.DML.html
//            ^^^^^ keyword.other.DML.html
//                  ^^^ keyword.other.DML.html
//                         ^^^^ keyword.other.DML.html
    "@text@ Text @huge@ Huge @large@ Large"
//   ^^^^^^ keyword.other.fontname.intens
//               ^^^^^^ keyword.other.fontname.intens
//                           ^^^^^^^ keyword.other.fontname.intens
  )
;

FORM
  myform1 { "fancy name 1",
            HIDDEN,
            FUNC=myfunc4 }
    ( ),
//     ^ punctuation.separator.delimiter.intens
  myform2 { "fancy name 1",
            CLOSE_BUTTON=NONE,
            HIDE_CYCLE }
    ( ),
  logwin_form { "Logging Window" }
    (LOG_WINDOW { SIZE=2000 } );
//                ^^^^ - support.function.builtin.intens
//                    ^ keyword.operator.assignment.augmented.intens

IMAGE img1 {
        SIZE(256,256),
//      ^^^^ support.function.builtin.intens
        SOCKET=my_socket,
        SETTINGS=foo.bar};

INDEX my_index;
//            ^ punctuation.terminator.statement.intens

FOLDER
  my_folder { LEFT, VERTICAL, STRETCH } (
        ["":baz, FUNC = myfunc4 ] (mygroup_fg)
//                                 ^^^^^^^^^^ - variable.function.intens
    );

FOLDER WHILE {} ();
//     ^^^^^ invalid.illegal.name.intens

TABLE my_table {HORIZONTAL(TABLESIZE=7, RANGE(1)),
//              ^^^^^^^^^^ support.function.builtin.intens
//                         ^^^^^^^^^ variable.parameter.intens
//                                      ^^^^^ support.function.builtin.intens
                VERTICAL(TABLESIZE=7, RANGE(1))}
        (LEFT();
//             ^ punctuation.terminator.statement.intens
         TOP();
         TABLE(););
//                ^ punctuation.terminator.statement.intens

THERMO my_thermo {
            RANGE(256,256),
//          ^^^^^ support.function.builtin.intens
            ORIENTATION=VERTICAL,
//                      ^^^^^^^^ constant.language.intens
            SIZE(50,100), UNIT=UNIT(foo.foo)
//                        ^^^^ variable.parameter.intens
//                            ^ keyword.operator.assignment.augmented.intens
//                             ^^^^ support.function.builtin.intens
//                                 ^ punctuation.section.group.begin.intens
//                                  ^^^ -variable.parameter.intens
//                                         ^ punctuation.section.group.end.intens
        } (foo.bar);

MENU PRINT {EXPLICIT} (SEPARATOR),
// <- storage.type.other.intens
//          ^^^^^^^^ storage.modifier.intens
//                     ^^^^^^^^^ variable.parameter.intens
     "&Tools" (FUNC hello_func="Show Hello World Message",
//             ^^^^ - storage.type.function.intens
//                  ^^^^^^^^^^ variable.function.intens
//                            ^ keyword.operator.assignment.augmented.intens
//                                                       ^ punctuation.separator.delimiter.intens
               FORM fancy_form,
//                            ^ punctuation.separator.delimiter.intens
               FUNC bye_func="Quit");
//             ^^^^ variable.parameter.intens - invalid.illegal.name.intens

END UI_MANAGER;
//            ^ punctuation.terminator.statement.intens

LANGUAGE
END LANGUAGE;

END.
// <- keyword.other.intens
// ^ punctuation.terminator.propram.intens
